<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8" />
<meta name="generator" content="Hugo 0.123.6">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="toTop" content="true">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="author" content="子舒" />
<meta property="og:url" content="https://zishu.me/tags/%E5%8D%9A%E5%AE%A2/" />
<link rel="canonical" href="https://zishu.me/tags/%E5%8D%9A%E5%AE%A2/" /><link rel="apple-touch-icon" href="https://imgurl.zishu.me/favicon.ico" />
<link rel="icon" href="https://imgurl.zishu.me/favicon.ico" />
<link rel="shortcut" href="https://imgurl.zishu.me/favicon.ico" /><link rel="alternate" type="application/atom+xml" href="https://zishu.me/index.xml" title="子舒的博客">
<script type="application/ld+json">
{
"@context" : "http://schema.org",
"@type" : "BlogPosting",
"mainEntityOfPage": {
"@type": "WebPage",
"@id": "https:\/\/zishu.me\/"
},
"articleSection" : "tags",
"name" : "博客",
"headline" : "博客",
"description" : "",
"inLanguage" : "en-US",
"author" : "子舒",
"creator" : "子舒",
"publisher": "子舒",
"accountablePerson" : "子舒",
"copyrightHolder" : "子舒",
"copyrightYear" : "2023",
"datePublished": "2023-05-13 00:00:00 \u002b0000 UTC",
"dateModified" : "2023-05-13 00:00:00 \u002b0000 UTC",
"url" : "https:\/\/zishu.me\/tags\/%E5%8D%9A%E5%AE%A2\/",
"keywords" : [  ]
}
</script><title>博客 - 子舒的博客</title>
<meta property="og:title" content="博客" />
<meta property="og:type" content="article" />
<meta property="og:description" content="" />
<meta name="description" content="" />
<meta property="og:locale" content="en-us" /><meta property="og:image" content="https://imgurl.zishu.me/favicon.ico" />


<link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="/css/index.css">
<link href="/index.xml" rel="alternate" type="application/rss+xml" title="子舒的博客">
<script src="/js/jquery3.6.0.min.js"></script>
</head>

<body id="container">
  <meter id="isread" max="100" value="0"></meter>
<script>
  window.addEventListener('scroll', function () {
    var scrolled = window.scrollY;
    var totalHeight = document.documentElement.scrollHeight - window.innerHeight;
    var percentage = (scrolled / totalHeight) * 100;
    $('#isread').attr('value', percentage)
  });
</script>


<div id="head" class="site-index">
  <a id="logo" href="/">
    <img src="https://imgurl.zishu.me/author.webp">
  </a>
  <div id="site-title">
    <a href="/">子舒的博客</a>
  </div>
  <ul id="menu">
    
    <li><a href="/categories/%e6%8a%80%e6%9c%af/">技术</a></li>
    
    <li><a href="/categories/%e9%9a%8f%e7%ac%94/">随笔</a></li>
    
    <li><a href="/categories/weekly/">周刊</a></li>
    
    <li><a href="/message/">留言</a></li>
    
    <li><a href="/about/">关于</a></li>
    
    <li><a href="/index.xml" target="_blank">订阅</a></li>
  </ul>
</div>

  <section id="body">
    <h1 id="body-title">📓 博客</h1>

    <div id="body-in">
      <h3 class="posts-year" id="2023">2023</h3>
      
      
      <div class="index-post" onclick="javascript:window.location.href='\/blog\/194.html\/'">
        <div class="index-post-content-long">
          <a href="/blog/194.html/">
            <h2>hugo 纯静态编写一个字数统计脚本</h2>
          </a>
          <div class="text">早上起来的时候看到微信群中有博友分享自己的建站时间，聊着聊着说到总字数上面，这时我才发现我的网站没有统计的地方，索性就自己写一个吧，因为是静态博客，所以不涉及后端、服务器等，只用前端的方式来解决。 这里需要借助我之前的一篇文章，《用原生 js 给网站写个搜索功能》，里面有提到如何生成一个文章列表 json 文件，这里我们会用到这个文件 index.json。 写一个 ajax 方法，让浏览器遍历每个页面。 $(document).ready(function () { $.ajax({ url: &#39;/index.json&#39;, type: &#39;get&#39;, dataType: &#39;json&#39;, success: function (data) { const pageUrls = data; const totalNum = pageUrls.length; $(&#39;#totalNum&#39;).html(totalNum); let totalWords = 0; pageUrls.forEach(urlObj =&gt; { $.get(urlObj.permalink, function(data) { const content = data.replace(/(&lt;([^&gt;]+)&gt;)/gi, &#34; &#34;).replace(/[^\w\s]/gi, &#34; &#34;); const words = content.split(&#34; &#34;); const wordCount = words.filter(word =&gt; word !== &#34;&#34;).length; totalWords += wordCount; $(&#39;#totalWords&#39;).html(totalWords); }); }); }, error: function () { console.log(&#39;error&#39;) } }) }); 我是将信息放在我的 关于 页面下。 经过脚本统计，我已经写了 &lt;span id=&#34;totalNum&#34;&gt;&lt;/span&gt; 篇文章，总共 &lt;span id=&#34;totalWords&#34;&gt;&lt;/span&gt; 个字。 &lt;!-- 经过脚本统计，我已经写了 164 篇文章，总共 97577 个字。 --&gt;</div>
          <div class="index-post-meta">
            <a href="/blog/194.html/"> # 2023-05-13</a>
            
            
            <span class="namenode">技术</span>
            
            
          </div>
        </div>
      </div>

      
      
      <div class="index-post" onclick="javascript:window.location.href='\/blog\/188.html\/'">
        <div class="index-post-content-long">
          <a href="/blog/188.html/">
            <h2>博客运行 1000 天了</h2>
          </a>
          <div class="text">使用 openai 生成。 [大漠孤烟直，长河落日圆] 不知不觉，已经坚持写博客 1000 天了，从 2020 年 6 月 14 日开始，第一次踏入这个圈子。最开始我还会写一些技术类的文章，但随着时间的推移，这意义不大，因为类似的文章在互联网都能找到一大把，因此我放弃这种类型文章的写作。主要进行了生活分享，和一些随笔等。更新日期也不固定，哪天忽然来了灵感会兴奋的更新一次。 虽然频率不高，但是从未间断，而且还让更多的人和我一起就某个话题进行讨论，这都是让我感觉到有意义的事情。分享自己的经验，心路历程和价值观，在互联网留下自己的足迹，或许在很久之后，我渐渐淡出这个圈子，但是我会保存这个网站在 GitHub 等平台，如果有缘分的话，十年、二十年，你都可以在搜索引擎无意中看到我。每当一想到这，我都感觉充满了干劲。 这一路上有朋友慢慢退出，我也表示遗憾，就目前而言，我应该不会放弃做博客，阅读者很少，但总归是有的。不能让自己失望，更不能让其他朋友失望，期待十年后依旧可以在互联网看到我的身影。回首过往萧瑟处，也无风雨也无晴！</div>
          <div class="index-post-meta">
            <a href="/blog/188.html/"> # 2023-03-10</a>
            
            
            <span class="namenode">随笔</span>
            
            
          </div>
        </div>
      </div>

      
    </div>
    <div id="body-in">
      <h3 class="posts-year" id="2022">2022</h3>
      
      
      <div class="index-post" onclick="javascript:window.location.href='\/blog\/170.html\/'">
        <div class="index-post-content-long">
          <a href="/blog/170.html/">
            <h2>hugo 一键打包并上传 github</h2>
          </a>
          <div class="text">分享一个 hugo 一键打包并上传 github 的方法，前提是你之前上传过 GitHub 仓库。 采用 window 支持的 sh 可执行文件，在根目录新建一个 hugo.sh 文件，里面放上一些命令。 hugo # cd public time=$(date &#34;+%Y-%m-%d %H:%M:%S&#34;) echo $time git add . git commit -m &#34;自动执行构建脚本 🎓$time&#34; git push exit 可以在文件夹双击运行 hugo.sh，也可以在终端输入命令。 .\hugo.sh 省去了我输入繁琐的 Git 上传指令，并且自动生成当前系统时间作为 commit。 其他 这里我上传的是整体的 hugo 目录，如果你只想上传生成的 /public ，在中间加入 cd public。</div>
          <div class="index-post-meta">
            <a href="/blog/170.html/"> # 2022-10-14</a>
            
            
            <span class="namenode">技术</span>
            
            
          </div>
        </div>
      </div>

      
      
      <div class="index-post" onclick="javascript:window.location.href='\/blog\/132.html\/'">
        <div class="index-post-content-long">
          <a href="/blog/132.html/">
            <h2>typecho 评论回复艾特评论人</h2>
          </a>
          <div class="text">typecho 在评论时默认是没有 @ 评论人的功能，可以用代码加一下。 在 functions.php 中： /* * 评论回复时 @ 评论人 */ function get_comment_at($coid) { $db = Typecho_Db::get(); $prow = $db-&gt;fetchRow($db-&gt;select(&#39;parent,status&#39;)-&gt;from(&#39;table.comments&#39;) -&gt;where(&#39;coid = ?&#39;, $coid)); $mail = &#34;&#34;; $parent = @$prow[&#39;parent&#39;]; if ($parent != &#34;0&#34;) { $arow = $db-&gt;fetchRow($db-&gt;select(&#39;author,status,mail&#39;)-&gt;from(&#39;table.comments&#39;) -&gt;where(&#39;coid = ?&#39;, $parent)); @$author = @$arow[&#39;author&#39;]; $mail = @$arow[&#39;mail&#39;]; if(@$author &amp;&amp; $arow[&#39;status&#39;] == &#34;approved&#34;){ if (@$prow[&#39;status&#39;] == &#34;waiting&#34;){ echo &#39;&lt;p class=&#34;commentReview&#34;&gt;（评论审核中）)&lt;/p&gt;&#39;; } echo &#39;&lt;a href=&#34;#comment-&#39; . $parent . &#39;&#34;&gt;@&#39; . $author . &#39;&lt;/a&gt;&#39;; }else{ if (@$prow[&#39;status&#39;] == &#34;waiting&#34;){ echo &#39;&lt;p class=&#34;commentReview&#34;&gt;（评论审核中）)&lt;/p&gt;&#39;; }else{ echo &#39;&#39;; } } } else { if (@$prow[&#39;status&#39;] == &#34;waiting&#34;){ echo &#39;&lt;p class=&#34;commentReview&#34;&gt;（评论审核中）)&lt;/p&gt;&#39;; }else{ echo &#39;&#39;; } } } 然后在 comments.php 中输出评论内容代码的前面加上： &lt;?php $parentMail = get_comment_at($comments-&gt;coid)?&gt;&lt;?php echo $parentMail;?&gt; ▼代码所示 ▼效果图 我的博客即将同步至腾讯云+社区，邀请大家一同入驻：https://cloud.tencent.com/developer/support-plan?invite_code=17ctk6evsjk5b</div>
          <div class="index-post-meta">
            <a href="/blog/132.html/"> # 2022-06-07</a>
            
            
            <span class="namenode">技术</span>
            
            
          </div>
        </div>
      </div>

      
      
      <div class="index-post" onclick="javascript:window.location.href='\/blog\/120.html\/'">
        <div class="index-post-content-long">
          <a href="/blog/120.html/">
            <h2>浏览器收藏夹一键填写博客评论信息</h2>
          </a>
          <div class="text">先点击收藏一个页面，然后右键它，选择修改，在网址输入框复制下面的 js 代码，就可以一键填入了。 将其中的昵称，邮箱，网址修改成自己的信息。 目前支持绝大多数主流博客平台和系统，如果发现没有起作用，可以在下面代码里面修改增加一下 input 的属性。 如果你不会修改的话，可以在评论区留言没有起作用的网站，我可以更新代码。 javascript:void function(){var lauthor=[&#34;#author&#34;,&#34;input[name=&#39;comname&#39;]&#34;,&#34;#inpName&#34;,&#34;input[name=&#39;author&#39;]&#34;,&#34;#ds-dialog-name&#34;,&#34;input[name=&#39;wc_name&#39;]&#34;, &#34;input[name=&#39;nick&#39;]&#34;,],lmail=[&#34;#mail&#34;,&#34;#email&#34;,&#34;input[name=&#39;commail&#39;]&#34;,&#34;#inpEmail&#34;,&#34;input[name=&#39;email&#39;]&#34;,&#34;#ds-dialog-email&#34;,&#34;input[name=&#39;wc_email&#39;]&#34;,&#34;input[name=&#39;mail&#39;]&#34;,],lurl=[&#34;#url&#34;,&#34;input[name=&#39;comurl&#39;]&#34;,&#34;#inpHomePage&#34;,&#34;#ds-dialog-url&#34;,&#34;input[name=&#39;url&#39;]&#34;,&#34;input[name=&#39;wc_website&#39;]&#34;,&#34;input[name=&#39;link&#39;]&#34;,];for(i=0;i&lt;lauthor.length;i++){var author=document.querySelector(lauthor[i]);if(author!=null){author.value=&#39;子舒&#39;;break}}for(j=0;j&lt;lmail.length;j++){var mail=document.querySelector(lmail[j]);if(mail!=null){mail.value=&#39;shuxhan@163.com&#39;;break}}for(k=0;k&lt;lurl.length;k++){var url=document.querySelector(lurl[k]);if(url!=null){url.value=&#39;https://zishu.me&#39;;break}}return!1}()</div>
          <div class="index-post-meta">
            <a href="/blog/120.html/"> # 2022-04-26</a>
            
            
            <span class="namenode">技术</span>
            
            
          </div>
        </div>
      </div>

      
      
      <div class="index-post" onclick="javascript:window.location.href='\/blog\/110.html\/'">
        <div class="index-post-content-long">
          <a href="/blog/110.html/">
            <h2>增加了站内搜索功能</h2>
          </a>
          <div class="text">如题，我花了一个多小时，参照 nuxt 文档，把搜索功能给加上了，记录一下相关代码。 可以选择放在 components/&lt;Search /&gt; 里面，然后引入到 head 模板，也可以单独创建一个页面，我选择的是后者。 新建一个页面模板 /pages/search.vue 。 &lt;template&gt; &lt;div&gt; &lt;HeaderMe /&gt; &lt;div class=&#34;wrapper&#34;&gt; &lt;PageSidebar /&gt; &lt;div class=&#34;archive&#34;&gt; &lt;h2&gt;{{ article.attributes.title }}&lt;/h2&gt; &lt;div class=&#34;article-content markdown-body&#34; v-html=&#34;article.html&#34;&gt;&lt;/div&gt; &lt;div class=&#34;search&#34;&gt; &lt;input v-model=&#34;searchQuery&#34; type=&#34;search&#34; autocomplete=&#34;off&#34; placeholder=&#34;文章关键词&#34; /&gt; &lt;ul v-if=&#34;articles.length&#34;&gt; &lt;li v-for=&#34;article of articles&#34; :key=&#34;article.slug&#34;&gt; &lt;NuxtLink :to=&#34;article.path+&#39;/&#39;&#34;&gt;{{ article.title }}&lt;/NuxtLink&gt; &lt;!-- 在url地址后加一个/，配置全站的url格式，防止错乱 --&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; import HeaderMe from &#34;@/components/HeaderMe&#34;; import PageSidebar from &#39;@/components/PageSidebar&#39;; export default { components: { HeaderMe, PageSidebar }, data () { return { searchQuery: &#39;&#39;, articles: [] } }, async asyncData () { // 调用 search.md 内的数据 const article = await import(`~/content/search.md`); return { article }; }, watch: { async searchQuery (searchQuery) { if (!searchQuery) { this.articles = [] return } this.articles = await this.$content(&#39;posts&#39;) // posts 是文章所在的文件夹的名称 .limit(10) .search(searchQuery) .fetch() } } } &lt;/script&gt; 关于样式的编写不怎么重要我就放下面了。 css 代码 .wrapper { min-height: 300px; .archive { padding: 25px 2% 15px; .article-content { font-size: inherit; line-height: 1.8; color: inherit; margin-top: 20px; } .search { margin-top: 16px; input { width: 100%; background-color: #edf2f7; color: #2f495e; outline: none; border: none; border-radius: 30px; padding: 4px 20px; box-sizing: border-box; transition: all 0.1s linear; &amp;:focus { box-shadow: 3px 2px 10px rgb(0 0 0 / 20%); } } ul { margin-top: 6px; list-style: none; li { a { display: block; padding: 6px 14px; line-height: 1.6; transition: all 0.2s linear; &amp;:hover { background: #edf2f7; } } } } } } } @media (max-width: 520px) { .wrapper { .archive { .search { ul { li { a { border-bottom: 1px solid #ddd; } } } } } } }</div>
          <div class="index-post-meta">
            <a href="/blog/110.html/"> # 2022-03-25</a>
            
            
            <span class="namenode">技术</span>
            
            
          </div>
        </div>
      </div>

      
      
      <div class="index-post" onclick="javascript:window.location.href='\/blog\/104.html\/'">
        <div class="index-post-content-long">
          <a href="/blog/104.html/">
            <h2>“不如吃茶去”</h2>
          </a>
          <div class="text">想了很久，也算是结合自己的心境吧，打算正式起一个博客名称，以前子舒的博客，也就是挂着自己的名字，总觉得差点意思。所以现在决定更名为 &lsquo;不如吃茶去&rsquo;。其中含义，听我娓娓道来&hellip; 我是从中学开始接触音乐的，当时喜欢唱歌，会听很多当时流行的歌曲。那时候比较火的最多的还是周杰伦的歌，还有就是林俊杰等歌手。 然后再到初入高中，准确的说应该是初三，开始听许嵩的歌，最开始是《自定义》专辑，每天都听，节奏很有旋律感。为此还专门买了一个 mp4，带着一块小屏幕的那种，下载了许嵩的歌，上学放学路上经常会听，包括在上晚自习的时候，也会一边听，一边写作业。 在 14 年的时候，许嵩正式发布的新专辑《不如吃茶去》，当时的我一听到这里面的歌，一下子就爱上了，从此彻底粉上了许嵩。 我觉得有一句话说的特别好：许嵩想通过专辑传递出“大千世界有很多想不通的事、猜不透的心与看不透的人，倒不如不想、不猜、不看，携寄情山水的快意人生吃茶去”的淡然态度。 当时年纪还小，单纯的听旋律和歌词。现在回过头来，仔细琢磨里面的话，突然感觉有了新的变化。这世界一直处于变化之中，正如罗翔老师讲的，这世界唯一不变的就是变化本身。 社会纷纷扰扰，心里也有很多杂绪，滋生了很多欲望。但是我也很清楚的知道，有些东西和欲望充其量是被社会气氛所带动的，而我自身不需要那些，过好自己的生活，不被外物所扰。“不以物喜，不以己悲。” 不如吃茶去，我也希望我的心境能同这句话一般，沉淀下来，不想那些太多遥远的东西，立足眼下，把握住身边的美好。 七碗受至味，一壶得真趣，空持百千偈，不如吃茶去。 &mdash;赵朴初</div>
          <div class="index-post-meta">
            <a href="/blog/104.html/"> # 2022-02-24</a>
            
            
            <span class="namenode">随笔</span>
            
            
          </div>
        </div>
      </div>

      
      
      <div class="index-post" onclick="javascript:window.location.href='\/blog\/102.html\/'">
        <div class="index-post-content-long">
          <a href="/blog/102.html/">
            <h2>Nuxt.js 如何部署 Artalk 和遇到的问题</h2>
          </a>
          <div class="text">花了两天时间，终于把 Artalk 部署好了，一款数据自托管带后端的评论程序，非常适合我。这篇文章就介绍一下我部署的流程，以及我在部署过程中遇到的一些问题，将它记录一下，以便之后研究，顺便对使用 Nuxt.js 搭建博客的伙伴提供一些参考价值。 Artalk 地址：https://artalk.js.org/ 这篇文章我将分为三个部分，后端部署、前端部署、问题研究。 1.后端部署 官方有两个版本，注意分辨，php 和 go，对应的是不同的仓库，目前官方文档写的默认都是 go 语言开发的。 ArtalkGo 仓库：https://github.com/ArtalkJS/ArtalkGo 我使用的也是 go 版本，功能和优化都比较好。 docker 构建 + 宝塔 我的服务器是 Ubuntu 20.04，其他版本类似，没有很大不同。 首先，使用 ssh 连接服务器。 sudo su # 启用sudo模式 cd /www/wwwroot/ # 进入站点目录 mkdir ArtalkGo cd ArtalkGo # 为 ArtalkGo 创建一个目录 curl -L https://raw.githubusercontent.com/ArtalkJS/ArtalkGo/master/artalk-go.example.yml &gt; conf.yml # 下载配置文件模版 到这里之后，官方说的是用 vim conf.yml 进入配置文件，修改参数然后配置。我不是很建议，因为用着并不是那么顺手（因为我菜），我建议直接到达 /www/wwwroot/ArtalkGo 目录下修改 conf.yml 文件，文本模式操作起来更顺手。 里面的配置基本都是站点名称，管理员，邮箱等设置，没什么大问题。除此之外，端口等参数都不用碰，不然会报错。 配置完文件之后直接保存就行了。 在宝塔插件里面下载 Docker 管理器，点击镜像管理。 然后在镜像名称输入 artalk/artalk-go 点击获取镜像即可，大概两分钟就下载结束了。 然后回到 ssh 连接，新建 docker 容器。 docker run -d \ --name artalk-go \ -p 0.0.0.0:8080:23366 \ -v $(pwd)/conf.yml:/conf.yml \ -v $(pwd)/data:/data \ artalk/artalk-go 将上面的命令行在命令行，直接回车就行了。 这个时候需要去你的服务器厂商那里放行端口 8080 ，如果之前放行过不用管，没有放行的话需要去设置一下。 然后在浏览器输入 http://ip地址:8080 。 如果出现现在这个页面，说明你部署成功了，如果打不开或者是其他情况，请检查是否成功执行上面的步骤。 如果之后修改配置文件了，一定要注意在修改之后执行命令，需要重启服务才能生效。 docker restart artalk-go 反向代理 这个如果使用宝塔太简单，就不细说了。 https://artalk.js.org/guide/backend/reverse-proxy.html#%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF 文档已经说得很详细，如果出现操作失败的情况可以在下面评论。 2.前端部署 博客使用 vue + nuxt 开发。 我使用的是通过 cdn 引入的，npm 我目前发现和我博客有些冲突，暂时不使用该方式。 先在 /components 目录下新建一个组件名为 Comments.vue &lt;!-- Comments.vue --&gt; &lt;template&gt; &lt;div class=&#34;wrapper&#34;&gt; &lt;link href=&#34;https://cdn.jsdelivr.net/npm/artalk@2.1.4/dist/Artalk.css&#34; rel=&#34;stylesheet&#34;&gt; &lt;script src=&#34;https://cdn.jsdelivr.net/npm/artalk@2.1.4/dist/Artalk.js&#34;&gt;&lt;/script&gt; &lt;div id=&#34;Comments&#34;&gt;&lt;/div&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { name: &#39;Comments&#39;, } &lt;/script&gt; &lt;style lang=&#34;scss&#34; scoped&gt; &lt;!-- css代码 --&gt; &lt;/style&gt; 配置代码我单独放在 /static/main.js ，然后在 nuxt.config.js 引入。 // nuxt.config.js head: { title: &#39;子舒的博客 | imhan.cn&#39;, meta: [ // ... ] script: [ { src: &#39;/js/main.js&#39; }, ] }, 在 main.js 中配置 Artick。 new Artalk({ el: &#34;#Comments&#34;, server: &#39;https://域名/api&#39;, site: &#34;子舒的博客&#34;, placeholder: &#39;说点什么...&#39;, gravatar: { mirror: &#39;https://sdn.geekzu.org/avatar/&#39;, default: &#39;mp&#39;, }, pagination: { pageSize: 15, // 每页评论数 readMore: true, // 加载更多 or 分页条 autoLoad: true, // 自动加载 (加载更多) }, heightLimit: { content: 200, // 评论内容限高 children: 300, // 子评论区域限高 }, versionCheck: true, // 前端版本检测 }); 还有一个方案就是将文件放在服务器或者 github，将它引入，不过有些舍本逐末了，不是很建议。 3.问题研究 1. 关于评论路径问题 提交评论之后会在管理后台生成一个列表，表示哪个路径产生了评论， 如果想把某个页面评论转到其他页面，可以直接修改页面的 url，点击KEY变更。 Artalk 的路径判断很严格，包括 https://example.com/1 和 https://example.com/1/ 的评论就属于两个页面。 问过作者，觉得他的说法很有道理 qwqcode: https://example.com/1 和 https://example.com/1/ 本来就不属于相同路径，后者等价于 https://example.com/1/index.html (和 web 服务器配置有关) 所以我直接在我博客里把路径然后默认加一个 / 符号，不管打开哪个页面都会跳转到带有 / 的 url，也是非常简单粗暴的解决了这个问题。 path: `/posts/${key.replace(&#39;.md&#39;, &#39;&#39;).replace(&#39;./&#39;, &#39;&#39;)}/` 2. localhost:3000 和域名 由此引发的另一个问题就是我在本地构建 localhost:3000 是不会显示域名后的评论，这个问题也不是大问题，我研究过 Artalk 文档，因为他是一个后端，可以多个前端使用，如果仅仅判断二级目录会造成一个很大的问题。 https://a.com/1 和 https://b.com/1 这两个页面使用了同一套评论数据，所以为了避免这个情况，在判断路径时直接加上域名，这样的话，域名下的评论自然不会同步到 localhost:3000 。 这对我开发博客来说没有什么影响，所以就不打算解决了。 这是我目前遇到的问题，我会在后续的使用中持续更新本文，以作留存。</div>
          <div class="index-post-meta">
            <a href="/blog/102.html/"> # 2022-02-18</a>
            
            
            <span class="namenode">技术</span>
            
            
          </div>
        </div>
      </div>

      
      
      <div class="index-post" onclick="javascript:window.location.href='\/blog\/96.html\/'">
        <div class="index-post-content-long">
          <a href="/blog/96.html/">
            <h2>Nuxt 项目中如何引入百度统计？</h2>
          </a>
          <div class="text">在部署一个网站之后，我们最关心的事情无异于是访问量，以及对它的分析。国内的百度统计是一个不错的选择，基本的功能都是免费的。 只需要在 head 中引入一串 javascript 代码即可。 &lt;!-- &lt;script&gt; var _hmt = _hmt || []; (function() { var hm = document.createElement(&#34;script&#34;); hm.src = &#34;https://hm.baidu.com/hm.js?xxxxxxxxxxxxxxxxxxx&#34;; var s = document.getElementsByTagName(&#34;script&#34;)[0]; s.parentNode.insertBefore(hm, s); })(); &lt;/script&gt; --&gt; 上面是百度提供的统计代码，需要放在 &lt;head&gt;&lt;/head&gt;中。 但是在 nuxt 中，没有传统的 &lt;head&gt;&lt;/head&gt; 。所以要对他进行一些处理。 1. 首先在根目录下 /plugins 新建一个文件 baidu.js // /plugins/baidu.js export default ({app: {router}, store}) =&gt; { /* 每次路由变更时进行 pv 统计 */ router.afterEach((to, from) =&gt; { /* 告诉增加一个 PV */ try { window._hmt = window._hmt || [] window._hmt.push([&#39;_trackPageview&#39;, to.fullPath]) } catch (e) { } }) } 2. 配置 nuxt.config.js 文件 在 plugins中： plugins: [ { src: &#39;~/plugins/baidu&#39; } ], 在 head中： head: { // ... link: [ // ... ], script: [ { src: &#39;https://hm.baidu.com/hm.js?xxxxxxxxxxxxxxxxxxx&#39; } ] }, 在 script 中写入百度统计提供的 url 即可，按照对应的字符。</div>
          <div class="index-post-meta">
            <a href="/blog/96.html/"> # 2022-01-17</a>
            
            
            <span class="namenode">技术</span>
            
            
          </div>
        </div>
      </div>

      
    </div>
    <div id="body-in">
      <h3 class="posts-year" id="2021">2021</h3>
      
      
      <div class="index-post" onclick="javascript:window.location.href='\/blog\/88.html\/'">
        <div class="index-post-content-long">
          <a href="/blog/88.html/">
            <h2>实现图片灯箱功能</h2>
          </a>
          <div class="text">写博客必不可少的一个功能就是图片灯箱功能，也就是点击放大查看。但是不同程序的博客所使用的插件也都不一样，我这里研究出一套可以满足绝大部分程序的灯箱插件。已经测试过 hexo, hugo, typecho 均无问题。 引入文件 首先引入我们关键的两个文件分别是 zoom.css 和 zoom.js 。 &lt;!-- head 头部 --&gt; &lt;link rel=&#34;stylesheet&#34; href=&#34;https://cdn.zburu.com/list/zoom.css&#34;&gt; &lt;!-- body 底部 --&gt; &lt;!-- 如果已经有 jq 文件了，就不要引入 jquery --&gt; &lt;script src=&#34;https://cdn.zburu.com/list/jquery3.6.0.js&#34;&gt;&lt;/script&gt; &lt;!--图片灯箱--&gt; &lt;img src=&#34;&#34; alt=&#34;&#34; class=&#34;bigimg&#34;&gt; &lt;div class=&#34;mask&#34;&gt;&lt;/div&gt; &lt;script src=&#34;https://cdn.zburu.com/list/zoom.js&#34;&gt;&lt;/script&gt; 因为这个文件是放在我自己服务器上的，所以不敢保证以后还是这个路径，建议在浏览器打开，然后把里面的代码复制到本地使用。 调用 js 然后我们需要给图片一个类名，以及一个父元素盒子，同样也可以使用 jq 来完成。 这里的 .post-content 正文的类名，如果你是别的类名，可以直接将 .post-content 替换掉。 $(function(){ $(&#39;.post-content img&#39;).addClass(&#39;smallimg&#39;) $(&#39;.post-content img&#39;).wrap(&#39;&lt;div class=&#34;imgbox&#34;&gt;&lt;/div&gt;&#39;) }) 接着我们需要对插件进行初始化，直接在刚才的代码下面写入。 $(function(){ $(&#39;.post-content img&#39;).addClass(&#39;smallimg&#39;) $(&#39;.post-content img&#39;).wrap(&#39;&lt;div class=&#34;imgbox&#34;&gt;&lt;/div&gt;&#39;) /* smallimg // 小图 bigimg //点击放大的图片 mask //黑色遮罩 */ var obj = new zoom(&#39;mask&#39;, &#39;bigimg&#39;, &#39;smallimg&#39;); obj.init(); }) 回到页面上，点击正文的图片就可以成功放大了。 结束 随便放个图片试验一下吧！ 之所以我限制了在正文中才可以放大，是因为网站其他地方也有图片，如果都可以点击放大，就很不合理。 如果在使用中有其他问题，欢迎留言。</div>
          <div class="index-post-meta">
            <a href="/blog/88.html/"> # 2021-12-07</a>
            
            
            <span class="namenode">技术</span>
            
            
          </div>
        </div>
      </div>

      
      
      <div class="index-post" onclick="javascript:window.location.href='\/blog\/77.html\/'">
        <div class="index-post-content-long">
          <a href="/blog/77.html/">
            <h2>hugo 如何使用 Cusdis ?</h2>
          </a>
          <div class="text">Cusdis 是一个界面清爽、注重隐私的轻量级 (~5kb gzip) 评论系统，可以很方便地与 React、Vue 或其他博客系统结合，并且还提供了一个后台来管理所有的评论。 由于 Cusdis 自称是 Disqus 的替代方案，因此它还支持一键从 Disqus 导入、支持邮件通知等功能。 官方地址：https://cusdis.com/ 他通常是用于静态博客的一个第三方评论系统，但是官方文档没有提供如何在 hugo 中使用的参数，我也是报错了多次才琢磨出来。 1. 本地部署 根据提示，注册账号，然后 Add website ，建立一个仓库。 进入它，然后点击 setting。 Embed Code 会提供几行代码以及一些 api，复制他们。 data-app-id 是注册时自动生成的，注意保密，每个人都不一样。 &lt;div id=&#34;cusdis_thread&#34; data-host=&#34;https://cusdis.com&#34; data-app-id=&#34;xxxxxxxxx&#34; data-page-id=&#34;{{ PAGE_ID }}&#34; data-page-url=&#34;{{ PAGE_URL }}&#34; data-page-title=&#34;{{ PAGE_TITLE }}&#34; &gt;&lt;/div&gt; &lt;script async defer src=&#34;https://cusdis.com/js/cusdis.es.js&#34;&gt;&lt;/script&gt; 将这些代码复制到本地主题的 comments.html 文件内（就是评论的那个模块，每个主题或许都不一样，注意分辨）。 这个时候如果你 hugo server 基本都会报错，因为没有修改 {{ PAGE_ID }} 等内容，这不是 hugo 官方提供的参数，按照我下面的格式，将 id, url, title 重写一下即可。 &lt;div id=&#34;cusdis_thread&#34; data-host=&#34;https://cusdis.com&#34; data-app-id=&#34;c1d43485-e8a7-4895-972e-247eddaf242d&#34; data-page-id=&#34;{{ .RelPermalink }}&#34; data-page-url=&#34;{{ .RelPermalink }}&#34; data-page-title=&#34;{{ .Title }}&#34; &gt;&lt;/div&gt; &lt;script async defer src=&#34;https://cusdis.com/js/cusdis.es.js&#34;&gt;&lt;/script&gt; 保存重新 hugo server 即可。 这样做的好处是当你接受一条评论信息后，审核列表可以清楚地标明来自哪一篇文章。通常大多数博客都提供了这么一个功能。 2. 邮箱提醒 除了必备的评论功能，Cusdis 还提供了一个非常快速的邮箱提醒功能，不需要绑定密匙，直接输入自己的邮箱即可。 先勾选这个 Email Notification，然后点击下方的 Advanced Notification Settings (高级通知设置) 就可以进入设置，输入自己的邮箱。 3. 中文化 默认的评论和提示文字均为英文，对我们很不友好，这里提供一个不错的解决方案，在引入 Cusdis 之后，顺便复制引入下面这段代码。 &lt;script&gt; window.CUSDIS_LOCALE = { &#34;powered_by&#34;: &#34;评论由 Cusdis 提供&#34;, &#34;post_comment&#34;: &#34;发送&#34;, &#34;loading&#34;: &#34;加载中&#34;, &#34;email&#34;: &#34;邮箱地址 (可选)&#34;, &#34;nickname&#34;: &#34;昵称&#34;, &#34;reply_placeholder&#34;: &#34;回复内容...&#34;, &#34;reply_btn&#34;: &#34;回复&#34;, &#34;sending&#34;: &#34;发送中...&#34;, &#34;mod_badge&#34;: &#34;管理员&#34;, &#34;content_is_required&#34;: &#34;内容不能为空&#34;, &#34;nickname_is_required&#34;: &#34;昵称不能为空&#34;, &#34;comment_has_been_sent&#34;: &#34;评论已发送，管理员审核通过后会展示&#34; } &lt;/script&gt; 。。。</div>
          <div class="index-post-meta">
            <a href="/blog/77.html/"> # 2021-09-16</a>
            
            
            <span class="namenode">技术</span>
            
            
          </div>
        </div>
      </div>

      
      
      <div class="index-post" onclick="javascript:window.location.href='\/blog\/74.html\/'">
        <div class="index-post-content-long">
          <a href="/blog/74.html/">
            <h2>关于我为什么要写博客？</h2>
          </a>
          <div class="text">关于这个博客的构成 这个就放在最前面吗，算是起到一个统计整理的作用。 博客基础的框架使用是 hugo, 前端样式是自己慢慢构思的，可能是因为没有设计师的天分吧，构思出来的 UI 就很奇怪。 我也尽量将色彩往黑白上靠，就是为了避免色彩的冲突造成阅读的不适，以文字为主体，也可以将我的重心转移到写文章上来。 然后通过本地渲染构建了 public 静态文件，我将这些文件推送到服务器上，服务器的配置是最基础的 1h2g，不过已经完全可以满足个人正常使用了，这样可以提升访问速度。同时的话，我在 Github 备份了源码，这样就不用害怕如果有什么突发事件。 而且，通过 Github，我在 vercel 也构建了一个备份网站，基于 rope 可以直接生成一个项目网站，也是非常实用。 目前这个博客主题我并没有将其分离起来，一是不想专门维护一个开源项目，二是我也很难保证其稳定性，隔三差五我都会优化或者改变整体布局，如果作为一个开源项目的话，这毫无疑问是不合格的。 如果你想使用同款主题，可以前往仓库 https://github.com/dlzmoe/blog，这是博客全部的源码。 你可以把 themes 文件夹下的代码 copy 走。或者直接 fork 仓库，然后把 /content 内的文章删掉，换成你自己的。 2021.07.21 落笔 写这篇文章，大概是想回顾一下自己从写第一篇博客，一直到现在的心理历程吧！但是动笔的时候，又突然改变想法了。决定好好审视一下自己的内心，“我为什么要写博客？” 伊始 故事最开始源于 2020 年五月份，当时我正频临毕业之际，正处于找工作的状态，对前途还是有些迷茫的，不知道未来该怎么走，往哪方面发展，再加上对自己不够自信，可能有些焦虑吧。 但是不论心态怎么变化，生活总是要继续的，在闲暇之余我浏览很多技术网站，希望可以提升自己，当时我比较热衷于 csdn 和博客园吧，两个比较大的中文博客网站，不论是学习和查资料，百度出来的内容基本都是这两个网站的文章。然后在平时学习累计的过程中，我也会写一些笔记或者总结的内容，开始我是直接存放在本地，后来我放在 Gayhub 上面。 Gayhub: 又名，Github. 全球最大的同性交友网站，在这里你可以畅快的交流技术，copy code。 但是上过这个网站的人都懂，它的速度是多么的令人着急。虽然后来学会了一些科学上网的方法，但是还是很不爽，所以我把目光投向了技术交流平台，论坛社区。我开始试着在把笔记放在 csdn 上面，当做博客发布出去，至今还保留一些浅显易懂的文章在我的 csdn 账号上，不过许久没有登陆了。 接触 有一天，一个做前端的朋友给我推荐了一本书，叫做《Web 全栈工程师的自我修养》，作者是余果，之前我还写过一篇读后感，感兴趣的话也可以读一下，《对全栈的一些思考》 挺好的一本书，也很畅销，读完电子版的，我还专门为此买了一本纸质的书，表示支持一下作者。 然后了解到作者在大学时期就开始写个人博客，在深入了解过程中，我觉得他的思想真的不错，写的内容也很有深度，虽然很多文章跟技术无关，但是不可否认是好文章。（现在他已经转到微信公告号了，有兴趣搜一下：余果的专栏）。然后我就对他挺感兴趣的，以及对于个人博客这件事也突然有了更多的兴趣。 我感觉这是一个自己的私人领域，可以自由发挥，更像是自己盖了一栋房子，至于房子盖成什么样，就看自己的能力了。 一开始我选择的是 hexo 静态博客，他有很多优势，免费，部署快，可以不断的白嫖 github 仓库存储，包括文章，图片等，只要你愿意折腾，总有办法可以解决。 然后还有很多大佬开发了各种各样的插件，还有各种第三方平台。hexo 官网的主题也是相当丰富，都是个人开发者做出来，总能找到自己喜欢的那一款。 为此我还开发一款轻量的纯文字主题，simple99，感兴趣的话可以在官方列表搜索到，这里就不贴链接了，有夹带私货的嫌疑。 之后，我就把自己之前写的笔记都放在了这个博客中，部署之后自己查看的时候，也挺有成就感的。 本质 隔了两个月，开始继续更新这篇博客，接下来我会持续讲述自己的道路&hellip; 不知不觉已经写了一年的博客，从最开始兴奋，冲动，到现在的平息了内心的悸动，这一场心理历程，其实走的颇为坎坷。 中间有一段时间，频繁更换博客程序，hexo, hugo, halo, wordpress, typecho 最后终于确定了 hugo，一方面因为它是静态的系统，不需要服务器和数据库，可以随意在任何支持的平台部署（虽然最后我还是为了速度，将它部署在服务器上），而且它渲染的速度相当快，当文章越来越多时，使用 hexo 会渲染 10 多秒，让我感到很难受，因此我选择了速度更快的 hugo。 度过那段时间后，我感觉自己内心平静了很多，不会再为这些事情而折腾，处于一个平静期的状态。我想，这大概就是每个博主都要经历的阶段吧，抛去花里胡哨的外表，直击博客的本质。 我把它总结出四个字 &mdash; 记录、分享。 现在我认识很多新的博主，大部分都是刚刚接触，内心感官就是新奇，渴望部署一个让自己满意的博客，我都会指点一些细节和心得，也很开心。毕竟，在这个博客衰败，碎片化信息的时代，还有人能喜欢这个圈子，这确让人感到开心。 我会鼓励他们自己动手解决问题，然后进行思考，得出结果，这无疑是很令各位博主有成就感的。 有时候我也会写一些教程，或者开发的小插件分享出去，有需要的伙伴就可以到搜索引擎输入关键字，或许可以看到我的文章，这也让我感到荣幸。 反思 很多时候，我都会审视自己，在这个时代要不要继续坚持下去写博客，大部分人做的都是公众号，自媒体等等。这也是时代的趋势。然后我自己慢慢思考，拨开云雾见光明，我发现我想要的不是自媒体那样的感觉，我更渴望拥有自己的一片净土，偶尔放一些新奇的玩意，然后写写自己的生活记录和一些技术笔记。 我知道自己的水平远达不到大神的地步，单纯的想写点东西。仅此而已，不为其他。</div>
          <div class="index-post-meta">
            <a href="/blog/74.html/"> # 2021-07-21</a>
            
            
            <span class="namenode">技术</span>
            
            
          </div>
        </div>
      </div>

      
      
      <div class="index-post" onclick="javascript:window.location.href='\/blog\/67.html\/'">
        <div class="index-post-content-long">
          <a href="/blog/67.html/">
            <h2>Typecho 博客搭建及优化教程 (详细)</h2>
          </a>
          <div class="text">1.前言 本文从Typecho 简介开始讲解，其中包括服务器的选择，以及域名注册，服务器系统选择，宝塔安装，环境配置，Typecho 安装包括中间的防采坑注意事项，为您提供完整的保姆级搭建流程，请珍惜哦！ 如果不喜欢前面的啰嗦讲解，请跳过，直接从宝塔安装开始。 不喜勿喷，谢谢！ 需要买服务器可以 点击链接在腾讯云购买服务器有优惠哦~ 不嫖白不嫖，省个十几二十块钱不香吗？ 2.Typecho 简介 Typecho 基于 PHP5 开发，支持多种数据库，是一款内核强健﹑扩展方便﹑体验友好﹑运行流畅的轻量级开源博客程序。 Typecho 非常简洁，仅仅 7 张数据表，加上不足 400KB 的代码，就实现了完整的插件与模板机制。超低的 CPU 和内存使用率，足以发挥主机的最高性能。 原生支持 Markdown 语法，易读更易写。支持 BAE/GAE/SAE 等各类云主机，即使面对突如其来的高访问量，也能轻松应对。 Typecho 的默认模板和后台，全部采用了响应式设计。所以 Typecho 的大多数自制模板，都采用了自适应设计。 现在Typecho 拥有很多用户，完整的生态，各种功能插件和简洁优美的主题，是做博客的不二选择，相信你会喜欢上她简洁的风格！ 3.准备 服务器 + 域名 搭建Typecho 博客需要使用服务器或者虚拟机，最近也看到一篇使用 Vercel+Mysql 搭建 Typecho 的文章，但是这种是使用外部 Mysql 服务的，相比使用服务器或者虚拟机这种还是不太方便配置和管理的。使用服务器相比虚拟机会更加的好用。 **注：**本文只讲解服务器的搭建流程，虚拟机请参考！ **服务器选择：**推荐去腾讯云或阿里云，有学生机（9 元/月）可供选择，腾讯云还是 25 岁以下免学生认证的，学生价续费三次，所以有条件可以选择 1 年购买和续费，腾讯的还有免费升配置，，阿里云的学生机下架了，但是也可以买为新用户提供的，建议选择 轻量应用服务器，1h2g 的配置完全够用，流量也完全够用。 腾讯云：https://cloud.tencent.com/act/campus 阿里云：https://developer.aliyun.com/plan/grow-up 如果你买不了这种，也可以去其他服务商买新用户优惠的服务器，建议选择大厂。 选择服务器要看下地区，如果是大陆地区的服务器，需要去其对应的服务商进行域名备案，否者你无法使用，如果是香港地区或者国外的服务器，则不需要进行备案。 **注：**阿里和腾讯这两种轻量应用服务器都是需要 备案的，如果嫌麻烦或者不想备案，可选择其他地区的服务器！ 备案操作有些复杂，也需要好几天的时间，但是备案也有备案的好处，比如使用国内的 CDN 加速等。另请仔细参考各服务商提供的流程，要注意看清备案流程上的注意事项，防止备案驳回浪费时间。 相比国外和香港的服务器，使用大陆的服务器在国内的访问速度是最好的，当然如果你搞外国业务当我没说。。。 **域名选择：**域名选择很简单，去各大服务商注册一个就完事了，喜欢什么就注册什么，但是如果你要备案使用大陆服务器，一定不要注册不支持备案的域名，当然绝大多数都是支持备案的。另各大服务商也有新用户注册域名优惠活动，在百度仔细找一下就行了。 腾讯云：https://cloud.tencent.com/act/domainsales 阿里云：https://wanwang.aliyun.com/domain 华为云：https://activity.huaweicloud.com/domain1.html 下面开始搭建流程： 4.LNMP 环境 首先我们要搭建的就是 LNMP 环境，LNMP 代表的就是：Linux 系统下 Nginx+MySQL+PHP 这种网站服务器架构。 Linux 是一类 Unix 计算机操作系统的统称，是目前最流行的免费操作系统。代表版本有：debian、centos、ubuntu、fedora、gentoo 等。 Nginx 是一个高性能的 HTTP 和反向代理 web 服务器，同时也提供了 IMAP/POP3/SMTP 服务。 Mysql 是一款安全、跨平台、高效的，并与 PHP、Java 等主流编程语言紧密结合的数据库系统。 PHP 是一种在服务器端执行的嵌入 HTML 文档的脚本语言。 当然如果你不喜欢使用 Nginx，或者 Mysql，请自行更换其它的，这里不过多介绍！ Linux 系统的话，本文使用 Centos 8 系统讲解。 搭建 LNMP 环境，我们可以选择自行下载对应的安装包，然后在 Centos 系统中，安装Nginx，Mysql，PHP等，这种纯动手的方式，非常麻烦和复杂，在后期进行多网站管理和配置 HTTPS 证书，以及网站伪静态配置时非常麻烦。 所以本文讲解使用宝塔面板来进行安装部署环境！ 5.宝塔是什么 宝塔面板是一款服务器管理软件，支持 windows 和 linux 系统，可以通过 Web 端轻松管理服务器，提升运维效率。例如：创建管理网站、FTP、数据库，拥有可视化文件管理器，可视化软件管理器，可视化 CPU、内存、流量监控图表，计划任务等功能。 宝塔面板拥有极速方便的一键配置与管理，可一键配置服务器环境（LAMP/LNMP/Tomcat/Node.js），一键部署 SSL，异地备份；提供 SSH 开启关闭服务，SSH 端口更改，禁 ping，防火墙端口放行以及操作日志查看；CPU、内存、磁盘 IO、网络 IO 数据监测，可设置记录保存天数以及任意查看某天数据； 计划任务可按周期添加执行，支持 SHELL 脚本，提供网站、数据库备份以及日志切割，且支持一键备份到又拍云存储空间，或者其他云存储空间里；通过 web 界面就可以轻松管理安装所用的服务器软件，还有实用的扩展插件；集成方便高效的文件管理器，支持上传、下载、打包、解压以及文件编辑查看。 进入搭建正题： 6.安装宝塔 选择服务器时，选择系统镜像，不要选择服务商提供的应用镜像，操作系统选择 Centos，版本的话 7 和 8 都可以。当然你也可以选择其他系统，，， 接着到服务商的控制台，找到你的服务器，进入控制台，重置密码。 然后在安全&ndash;》防火墙那里添加规则。 端口范围8888，其他默认，备注随意。 **注：**如果你不添加 8888，安装宝塔以后你是进不去的，安装宝塔以后可以修改宝塔的进入端口，再修改一下这里就可以了！ 使用 SSH 工具连接你的服务器，如果没有 SSH 工具也可以使用控制台那里提供的远程连接！ 在终端界面输入一下命令开始安装！ Centos 安装命令： yum install -y wget &amp;&amp; wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh 不同操作系统有不同的安装命令，详情请去宝塔官网查看！ 遇到安装提示直接输入：y 安装完成后如下： 在浏览器中访问外网面板地址。 **注：**如果你刚才没有在服务器控制台安全防火墙那里添加端口 8888 是打不开的。 使用 username 和 password 登录宝塔面板，点击我已阅读并同意“《用户协议》”后进入宝塔面板！ 进入宝塔面板后，会弹出一键安装环境套件选择界面，这时我们选择左边的 LNMP 环境！ Nginx 1.18，Mysql 5.6（如果服务器内存在 2g 以上可以选择 5.7），PHP 7.4（php 建议版本选择 7.0 以上），Pure-Ftpd 1.0.49，phpMyAdmin 5.0（这是一个可以在浏览器页面管理数据库的软件程序，要在服务器控制台安全防火墙那里添加端口 888，否则无法打开） 安装方式有两个，极速安装（安装速度快，节省时间），编译安装（安装速度超级慢，有时会卡死，但会提升服务器性能），可自行选择。本文以极速安装为例！ 安装过程： 安装完成后，会提示绑定宝塔账号，点击免费注册，去注册一个，然后绑定就可以了！ **说明：**建议，安装完成后，左侧，面板设置，设置下面板的登录信息，修改一下登录入口，用户名，密码和端口。 注： 如果修改面板设置中的端口，也要在服务器控制台安全防火墙那里修改端口。 7.安装 Typecho 访问Typecho 官网，点击立即下载，点击下载 1.1 正式版。 下载完成后，得到一个 1.1-17.10.30-release.tar.gz 压缩包，解压后可以看到里面有一个 build 文件夹，文件夹里面便是 Typecho 程序文件。 先域名解析一下，去你的域名服务商，控制台找到你的域名，解析，添加记录。主机记录填写@，www 或者 blog 其他的都可以（你填写的是什么就要以什么访问，比如填写 www 便是 www.xxx.com 等），记录类型 A 类型，记录值填写自己服务器的 IP 地址（如果不知道，可查看宝塔页面的左上角），确认就可以了！ 打开宝塔页面，左侧&ndash;》网站&ndash;》添加站点 添加域名，数据库选择 Mysql utf-8，填写数据库账号和密码以及对应的 PHP 版本，然后提交。 这里可以先设置一下站点，点击站点右侧的设置，需要设置的有伪静态，SSL 证书，，， 伪静态选择 typecho，然后保存。 SSL 证书，选择宝塔 SSL 证书，申请证书，填写相关信息，提交资料等申请成功就可以了。 如果申请失败，可以去域名服务商那里，有提供单域名免费 SSL 证书，然后选择其他证书，上传证书，开启右上角的强制 HTTPs 就可以了。 关闭设置窗口，点击根目录下的路径地址**/www/wwwroot/你的域名**，直接进入根目录文件夹，删除 index.html 文件。 点击上传，弹出窗口，点击上传文件，找到下载的 Typecho 压缩包，打开，然后开始上传，上传完毕关闭窗口。 解压该压缩包后（删除压缩包），得到 build 文件夹，进入其文件夹内，选择文件名旁边的框，全选文件，右上角选择剪贴，然后回到上一级根目录下，黏贴，然后删掉没用的 build 文件夹就可以了。 到这一步，浏览器输入你的域名，就可以安装 Typecho 了。 如有在上方遇到Deprecated: Function get_magic_quotes_gpc() is deprecated in /www/wwwroot/woshishabi.top/var/Typecho/Common.php on line 208报错，不用管，没什么影响。 点击下一步，进入初始化配置，这一步需要填写修改的是数据库用户名（添加站点时设置的数据库账号，如果忘了可去宝塔面板页面左侧，数据库查看），数据库密码，数据库名（数据库名和数据库用户名是一样的！），用户名，登录密码，邮件地址，确认，开始安装。 不出意外，安装成功！ 现在再浏览器访问域名，便可以查看你的 Typecho 博客了，当然现在是默认主题，还是比较丑的。 去百度你喜欢的主题下载，然后上传根目录/usr/themes/目录里面，在后台外观设置中更换。各主题教程以及配置教程都有主题文档。 插件安装是将下载的插件上传根目录/usr/plugin/ 目录里面，在后台设置中启用插件，设置插件。 你的后台面板地址就是你的域名/admin，用设置的用户名和密码登录就可以了！ 基本的安装到此为止了，下面说一些优化问题！ 8.优化 **永久链接：**对文章和页面进行重写地址，可以去掉地址栏中的 index.php，对 seo 也是很友好的。 启用重写功能，选择文章路径，选择你喜欢的风格，也可以自定义风格，下面有可选参数，本站使用的是个性化定义 /{cid}.html 。然后保存设置，会出现（重写功能检测失败，请检查你的服务器设置，如果你仍然想启用此功能，请勾选这里。），勾选这里，再次点击保存设置就可以了。</div>
          <div class="index-post-meta">
            <a href="/blog/67.html/"> # 2021-05-11</a>
            
            
            <span class="namenode">技术</span>
            
            
          </div>
        </div>
      </div>

      
      
      <div class="index-post" onclick="javascript:window.location.href='\/blog\/66.html\/'">
        <div class="index-post-content-long">
          <a href="/blog/66.html/">
            <h2>网站引入 iframe 视频，如何实现高度自适应？</h2>
          </a>
          <div class="text">我想很多小伙伴在写博客的时候都能遇到一个令人头疼的问题，某一篇文章想用 iframe 引入一个外链视频，但是大小总是有问题，宽度可以固定到 100% ，但是高度比如用实际高度来表示，比如 100px, 200px，诸如此类。 但是问题来了，在不同的页面宽度下，视频的高度是一致的，就会导致一个很麻烦的问题， 看下面两个图， pc 端 移动端 很明显，在 pc 端正常显示的视频，放到移动端高度就错位了，很不美观。 解决这个问题，可以同媒体查询，但是显然费时费力，还不那么完美。 其实很简单，只需要不到 10 行代码即可完美实现。 引入 jq，（一般网站默认都有这个文件） 加上一段 js 代码，最好放在网站底部， &lt;/body&gt; 前即可。 $(&#39;iframe&#39;).wrap(&#39;&lt;p class=&#34;iframe&#34;&gt;&lt;/p&gt;&#39;) 在 css 文件的底部加上： .iframe{ position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; } .iframe iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; } 这个时候再访问带有 iframe 视频的网页，不管宽度如何变化，高度可以随视频自适应。 例如这个网页，可以看一下效果：https://imhan.cn/posts/20210507.html</div>
          <div class="index-post-meta">
            <a href="/blog/66.html/"> # 2021-05-09</a>
            
            
            <span class="namenode">技术</span>
            
            
          </div>
        </div>
      </div>

      
      
      <div class="index-post" onclick="javascript:window.location.href='\/blog\/50.html\/'">
        <div class="index-post-content-long">
          <a href="/blog/50.html/">
            <h2>typecho 博客小表情无法显示问题</h2>
          </a>
          <div class="text">typecho 博客建立完成之后，会发现如果插入一些小表情，页面渲染完之后，表情不会显示，并且表情之后的内容全部消失，导致体验感很差。 表情无法显示的原因是 uft-8 编码的问题，无法识别小表情，需要将其改成 utf8mb4 第一步，进入数据库 首先登陆博客后台的数据库，然后点击 sql，输入下列代码： alter table typecho_comments convert to character set utf8mb4 collate utf8mb4_unicode_ci; alter table typecho_contents convert to character set utf8mb4 collate utf8mb4_unicode_ci; alter table typecho_fields convert to character set utf8mb4 collate utf8mb4_unicode_ci; alter table typecho_metas convert to character set utf8mb4 collate utf8mb4_unicode_ci; alter table typecho_options convert to character set utf8mb4 collate utf8mb4_unicode_ci; alter table typecho_relationships convert to character set utf8mb4 collate utf8mb4_unicode_ci; alter table typecho_users convert to character set utf8mb4 collate utf8mb4_unicode_ci; 直接复制，然后点击右下角的执行 第二步，修改 typecho 配置文件 我使用的宝塔面板，点击左侧 网站 ，然后点击我们这个网站的根目录，进入之后，可以找到一个 config.inc.php 的文件，进入然后滑到最下面。 **可以发现 'charset' =&gt; 'utf8',**下面我为了更直观的显示，将其注释掉，重新写的，实际操作中，将 utf8 改为 utf8mb4 即可。 /** 定义数据库参数 */ $db = new Typecho_Db(&#39;Pdo_Mysql&#39;, &#39;typecho_&#39;); $db-&gt;addServer(array ( &#39;host&#39; =&gt; &#39;localhost&#39;, &#39;user&#39; =&gt; &#39;blog&#39;, &#39;password&#39; =&gt; &#39;blog&#39;, /** &#39;charset&#39; =&gt; &#39;utf8&#39;, */ &#39;charset&#39; =&gt; &#39;utf8mb4&#39;, &#39;port&#39; =&gt; &#39;3306&#39;, &#39;database&#39; =&gt; &#39;blog&#39;, ), Typecho_Db::READ | Typecho_Db::WRITE); Typecho_Db::set($db); 在文章后台重新输入小表情，然后保存回到页面，小表情成功显示了。</div>
          <div class="index-post-meta">
            <a href="/blog/50.html/"> # 2021-02-04</a>
            
            
            <span class="namenode">技术</span>
            
            
          </div>
        </div>
      </div>

      
    </div>
    
    <footer id="foot">
  <p>© 2020 - 2024 Powered by
    <a href="https://github.com/dlzmoe/blog" target="_blank">Github</a>
    / <a href="/index.xml" target="_blank">RSS</a>
  </p>
</footer>

<script src="/js/main.js"></script>
<script defer src="https://cn.vercount.one/js"></script>
  </section>
</body>

</html>