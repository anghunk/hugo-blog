<!DOCTYPE html>
<html lang="en">
	<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="generator" content="Hugo 0.146.5">
	<title>hugo 纯静态编写一个字数统计脚本 - Manis</title>

	<meta name="description" content="早上起来的时候看到微信群中有博友分享自己的建站时间，聊着聊着说到总字数上面，这时我才发现我的网站没有统计的地方，索性就自己写一个吧，因为是静态博客，所以不涉及后端、服务器等，只用前端的方式来解决。
这里需要借助我之前的一篇文章，《用原生 js 给网站写个搜索功能》，里面有提到如何生成一个文章列表 json 文件，这里我们会用到这个文件 index.json。
写一个 ajax 方法，让浏览器遍历每个页面。
$(document).ready(function () {
  $.ajax({
    url: &#39;/index.json&#39;,
    type: &#39;get&#39;,
    dataType: &#39;json&#39;,
    success: function (data) {
      const pageUrls = data;
      const totalNum = pageUrls.length;
      $(&#39;#totalNum&#39;).html(totalNum);
      let totalWords = 0;
      pageUrls.forEach(urlObj =&gt; {
        $.get(urlObj.permalink, function(data) {
          const content = data.replace(/(&lt;([^&gt;]&#43;)&gt;)/gi, &#34; &#34;).replace(/[^\w\s]/gi, &#34; &#34;);
          const words = content.split(&#34; &#34;);
          const wordCount = words.filter(word =&gt; word !== &#34;&#34;).length;
          totalWords &#43;= wordCount;
          $(&#39;#totalWords&#39;).html(totalWords);
        });
      });
    },
    error: function () {
      console.log(&#39;error&#39;)
    }
  })

});
我是将信息放在我的 关于 页面下。
经过脚本统计，我已经写了 &lt;span id=&#34;totalNum&#34;&gt;&lt;/span&gt; 篇文章，总共 &lt;span id=&#34;totalWords&#34;&gt;&lt;/span&gt; 个字。
&lt;!-- 经过脚本统计，我已经写了 164 篇文章，总共 97577 个字。 --&gt;
">


	
	
	




<link rel="stylesheet" href="/css/ui.css">

	
	

	<script defer src="/js/dark-mode.js"></script>
	<link disabled id="dark-mode-theme" rel="stylesheet" href="/css/dark.css">
	<link  rel="stylesheet" href="/css/dropdown.css">

	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3973436778637330"
	crossorigin="anonymous"></script>

	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono">
	
				
	
</head>

<body>
<header class="container no-print">
	<div class="u-header">
		<nav class="bar">
	<ul><li>
			<a href="/">
				<img class="icon-text" src="/img/prev.svg"/>
			</a>
		</li><li><img class="icon-text" id="dark-mode-toggle" src="/img/moon-regular.svg" alt="Toggle Dark Mode"></a></li><li><a href="/about">About</a></li><li><a href="/post/">Post</a></li>





	</ul>
</nav>

	</div>
</header>
<main class="container">

<article>
	<header><hgroup id="brand">
	<h1>hugo 纯静态编写一个字数统计脚本</h1>
	<h5>
		
		<time datetime="2023-05-13 00:00:00 &#43;0000 UTC">May 13, 2023 00:00</time>
		<span class="no-print">
			|
				
				<a href="/tags/js">js</a>
				
				<a href="/tags/%e5%8d%9a%e5%ae%a2">博客</a>
				<span>
	</h5>
	
</hgroup>
<hr class="sep" />
</header>
	<p>早上起来的时候看到微信群中有博友分享自己的建站时间，聊着聊着说到总字数上面，这时我才发现我的网站没有统计的地方，索性就自己写一个吧，因为是静态博客，所以不涉及后端、服务器等，只用前端的方式来解决。</p>
<p>这里需要借助我之前的一篇文章，<a href="/blog/189.html/">《用原生 js 给网站写个搜索功能》</a>，里面有提到如何生成一个文章列表 json 文件，这里我们会用到这个文件 <code>index.json</code>。</p>
<p>写一个 ajax 方法，让浏览器遍历每个页面。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;/index.json&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;get&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">dataType</span><span class="o">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">pageUrls</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">totalNum</span> <span class="o">=</span> <span class="nx">pageUrls</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#totalNum&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">totalNum</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="kd">let</span> <span class="nx">totalWords</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">pageUrls</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">urlObj</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">urlObj</span><span class="p">.</span><span class="nx">permalink</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="kr">const</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(&lt;([^&gt;]+)&gt;)/gi</span><span class="p">,</span> <span class="s2">&#34; &#34;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[^\w\s]/gi</span><span class="p">,</span> <span class="s2">&#34; &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="kr">const</span> <span class="nx">words</span> <span class="o">=</span> <span class="nx">content</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&#34; &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="kr">const</span> <span class="nx">wordCount</span> <span class="o">=</span> <span class="nx">words</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">word</span> <span class="p">=&gt;</span> <span class="nx">word</span> <span class="o">!==</span> <span class="s2">&#34;&#34;</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="nx">totalWords</span> <span class="o">+=</span> <span class="nx">wordCount</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#totalWords&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">totalWords</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">});</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><p>我是将信息放在我的 <a href="/about/">关于</a> 页面下。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-md" data-lang="md"><span class="line"><span class="cl">经过脚本统计，我已经写了 <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;totalNum&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span> 篇文章，总共 <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;totalWords&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span> 个字。
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- 经过脚本统计，我已经写了 164 篇文章，总共 97577 个字。 --&gt;</span>
</span></span></code></pre></div><p><img src="https://imgurl.zishu.me/images/old/2023/05/13/645f33d7e3209.webp" alt=""></p>

</article>
<nav class="no-print post-nav">

	<a class="prev-post" href="//localhost:1313/blog/weekly-13/">
		<img class="icon-text" src="/img/prev.svg"/>奇趣周刊 - 第 13 期</a>


	<a class="next-post" href="//localhost:1313/blog/weekly-14/">奇趣周刊 - 第 14 期<img class="icon-text" src="/img/next.svg"/>
	</a>

</nav>


<section id="related">
  <h4>See Also</h4>
  <ul>
    
  	<li><a href="/blog/120/">浏览器收藏夹一键填写博客评论信息</a></li>
  	
  	<li><a href="/blog/189/">用原生 js 给网站写个搜索功能</a></li>
  	
  	<li><a href="/blog/188/">博客运行 1000 天了</a></li>
  	
  </ul>
</section>



	

<script src="https://utteranc.es/client.js"
        repo=""
        issue-term="url"
        label=""
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>



	

			<hr class="sep" />
		</main>
		<footer class="container no-print">
			<div class="u-footer">
				
<a href="mailto:mail@yurizal-san.com"><img class="icon-social" src="/img/email.svg" alt="Email Me!"/></a>


<a href="https://github.com/yursan9/"><img class="icon-social" src="/img/github.svg" alt="Github"/></a>



<a href="https://twitter.com/yuri_boya"><img class="icon-social" src="/img/twitter.svg" alt="Twitter"/></a>





				<p>
					
					Theme used: <a href="https://github.com/yursan9/manis-hugo-theme">Manis</a><br>
					
					
					&copy; 2019 Yurizal Susanto
					
					
					| <a href="/about/license">License</a>
					
				</p>
				
				<a href="#brand">
					<img class="icon-text" src="/img/toup.svg" alt="To Up"/>
					<span>Back to Up</span>
				</a>
				
			</div>
		</footer>
		
	</body>
</html>

