<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="icon" href="https://imgurl.zishu.me/favicon.ico" />
	<title>在宝塔中使用青龙面板代挂京豆 - 子舒的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">

	<link rel="stylesheet" href="/css/style.css">
	

</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="topbar">
		<a class="topbar__link" href="/" title="子舒的博客" rel="sidebar">
			<div class="topbar__item topbar__text">
					<div class="topbar__title">子舒的博客</div>
					<div class="topbar__tagline">我的独立博客，记录了很多东西，随笔、周刊、笔记等，欢迎访问！</div>
				</div>
		</a>
	</div>
		
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在宝塔中使用青龙面板代挂京豆</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<time class="meta__text" datetime="2022-04-15T00:00:00Z">2022-04-15</time></div></div>
		</header>
		<div class="content post__content clearfix">
			<p>如题所述，想要在闲置的服务器中跑一些服务，青龙面板代挂京豆现存很多开源的脚本，安全性已经经过很多人验证，可以放心使用。</p>
<p>因此我也安排了一个脚本，成功部署之后，就写这篇不算教程的笔记来记录一下整个过程。</p>
<p>Github: <a href="https://github.com/6dylan6/jdpro">https://github.com/6dylan6/jdpro</a>
作者会更新一些部署的指令，如果安装不成功可以对照文档中的指令。</p>
<h3 id="拉取镜像">拉取镜像</h3>
<p>我是在宝塔中运行服务的，也是非常简单方便。至于怎么安装宝塔，这里就不介绍了，之前写过一篇关于部署宝塔面板的教程，可以点击站内搜索。</p>
<p><a href="https://imhan.cn/posts/20210511">如何安装宝塔面板？</a></p>
<p>需要买服务器可以 <a href="https://curl.qcloud.com/opakHBek">点击链接在腾讯云购买服务器有优惠哦~</a> 不嫖白不嫖，省个十几二十块钱不香吗？</p>
<hr>
<p>先在软件商店中下载安装一个 <code>Docker管理器</code> ，之后点击 <code>设置 &gt; 镜像管理 &gt; 镜像获取</code>。</p>
<p>然后输入 <code>qinglong</code> 进行搜索，选择第一个链接然后拉取。</p>
<p><img src="https://imgurl.zishu.me/images/old/2022/04/24/6264d9cbb43e4.png" alt=""></p>
<h3 id="创建容器">创建容器</h3>
<p>点击创建容器。</p>
<p>镜像就选择刚才拉取的那个，端口映射中的容器端口和服务器端口都填入 5700，选择开机自启动，其他的都不用填，点击提交。</p>
<blockquote>
<p>服务器的防火墙放行 5700 端口。</p>
</blockquote>
<p><img src="https://imgurl.zishu.me/images/old/2022/04/24/6264d9e5ed0bb.png" alt=""></p>
<h3 id="部署脚本">部署脚本</h3>
<p>在浏览器输入 <code>ip:5700</code> ，ip 地址就是你的服务器 ip，会弹出一个青龙面板初始化配置，按照提示点击安装即可，没有特别复杂的。</p>
<p>都是用户名密码通知设置等，我选择的是邮箱通知。</p>
<p>安装完成后，在首页右上角点击新建任务，里面的内容直接复制即可。</p>
<ul>
<li>名称随便填</li>
<li>命令填写</li>
</ul>
<pre tabindex="0"><code>ql repo https://js.dayplus.xyz/https://github.com/6dylan6/jdpro.git &#34;jd_|jx_|jddj_&#34; &#34;backUp&#34; &#34;^jd[^_]|USER|JD|function|sendNotify&#34;
</code></pre><ul>
<li>定时规则填写</li>
</ul>
<pre tabindex="0"><code>0 0 0 * * *
</code></pre><p>点击确定即可。</p>
<p><img src="https://imgurl.zishu.me/images/old/2022/04/24/6264da01401ac.png" alt=""></p>
<p>完成之后，什么都先不要点。</p>
<h3 id="环境变量">环境变量</h3>
<p>接下来来到面板左侧导航的 <code>环境变量</code>，点击新建变量，这里就需要京东账号的 cookie 值了，浏览器打开 <code>m.jd.com</code> ，登录账号，最后调成手机模式。</p>
<p><img src="https://imgurl.zishu.me/images/old/2022/04/24/6264da11d338a.png" alt=""></p>
<p>然后在右侧找到 <code>network</code> ，点击搜索 js 文件，找到前缀为 <code>biz.json?.....</code> 的文件，右侧会显示一个 <code>cookie</code></p>
<p><img src="https://imgurl.zishu.me/images/old/2022/04/24/6264da1ed479e.png" alt=""></p>
<p>找到其中的 <code>pt_key</code>与<code>pt_pin</code> ，很长看仔细。一起复制到新建变量的值里面，上面的名称输入 <code>JD_COOKIE</code>，最后点击确定。</p>
<p><img src="https://imgurl.zishu.me/images/old/2022/04/24/6264da2b927ca.png" alt=""></p>
<h3 id="运行">运行</h3>
<p>最后回到定时任务，在分页的最后一页，找到最开始的那个脚本，单击允许，就会一直转圈在运行中，等到运行结束之后，选择禁用它，以后会始终保定时运行的。</p>
<p><img src="https://imgurl.zishu.me/images/old/2022/04/24/6264da3ccc796.png" alt=""></p>
<p>最后为了安全起见，把前面的脚本中带有 <code>加密</code> 二字的任务全部禁用。</p>
<p>到这里就结束了，基本每天可以跑个 100-200 左右的豆子，虽然少，时间长了也很可观，以后买东西可以抵扣，心中暗爽&hellip;.</p>

		</div>
	</article>
</main>


<div class="comments">
  <div class="giscus"></div>
</div>
<script 
  src="https://giscus.app/client.js" 
  data-repo="dlzmoe/blog" 
  data-repo-id="R_kgDOJkJvtw"
  data-category="Announcements" 
  data-category-id="DIC_kwDOJkJvt84CX9d6" 
  data-mapping="url" 
  data-strict="0"
  data-reactions-enabled="1" 
  data-emit-metadata="1" 
  data-input-position="top" 
  data-theme="light_protanopia"
  data-lang="zh-CN" 
  data-loading="lazy" 
  crossorigin="anonymous" 
  async>
</script>

			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 子舒的博客, 
			使用 hugo 构建
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>

  <script>
    MathJax = {
      tex: {
        inlineMath: [["$", "$"]],
      },
      displayMath: [
        ["$$", "$$"],
        ["\[\[", "\]\]"],
      ],
      svg: {
        fontCache: "global",
      },
    };
  </script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script
    id="MathJax-script"
    async
    src="https://gcore.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
  ></script>
</body>
</html>