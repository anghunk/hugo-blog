<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="icon" href="https://imgurl.zishu.me/favicon.ico" />
	<title>技术 - 子舒的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">

	<link rel="stylesheet" href="/css/style.css">
	
	<link rel="alternate" type="application/rss+xml" href="/categories/%E6%8A%80%E6%9C%AF/index.xml" title="子舒的博客">

</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="topbar">
		<a class="topbar__link" href="/" title="子舒的博客" rel="sidebar">
			<div class="topbar__item topbar__text">
					<div class="topbar__title">子舒的博客</div>
					<div class="topbar__tagline">The Tao that is utterable is not the eternal Tao</div>
				</div>
		</a>
	</div>
		
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main list" role="main">
	<header class="main__header">
		<h1 class="main__title">技术</h1>
	</header><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/blog/158.html/" style="color: #000000; text-decoration: none;" onmouseover="this.style.color='#4d4e4e';" onmouseout="this.style.color='#000000';">一些容易遗漏的点</a>
		</h2>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<time class="meta__text" datetime="2022-08-10T00:00:00Z">2022-08-10</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		 监听对象时如果值是 null 会报错，默认值设置为{}； for in 只能遍历对象 i in 4 是错误的写法； 动态获取数组 - 拼接传参 var arr = [ &#34;单位 1&#34;, &#34;单位 2&#34;, &#34;单位 3&#34;, &#34;单位 4&#34;, &#34;单位 5&#34; ] // 1.数组 [] for (var i = 0; i &lt; arr.length; i++) { this.defaultData.hostUnitList.push({ [arr[i]]: this.defaultData[arr[i]] }); } // 2.对象{} for (var i = 0; i &lt; arr.length; i++) { this.defaultData.hostUnitList[arr[i]] = this.defaultData[arr[i]] } 
	</div>
</article>
<article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/blog/155.html/" style="color: #000000; text-decoration: none;" onmouseover="this.style.color='#4d4e4e';" onmouseout="this.style.color='#000000';">win11 使用 10 版本的鼠标右键设置</a>
		</h2>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<time class="meta__text" datetime="2022-08-02T00:00:00Z">2022-08-02</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		实测好用，没有坑。
管理员权限下打开终端，输入。
reg add &#34;HKCU\Software\Classes\CLSID\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}\InprocServer32&#34; /f /ve 随后重新启动资源管理器即可
taskkill /f /im explorer.exe &amp; start explorer.exe 恢复默认指令。
reg delete &#34;HKCU\Software\Classes\CLSID\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}&#34; /f 
	</div>
</article>
<article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/blog/154.html/" style="color: #000000; text-decoration: none;" onmouseover="this.style.color='#4d4e4e';" onmouseout="this.style.color='#000000';">Anghunk 主题如何在后台评论列表解析表情？</a>
		</h2>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<time class="meta__text" datetime="2022-07-30T00:00:00Z">2022-07-30</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		本文专为 Anghunk 主题开发文档而写。 https://github.com/dlzmoe/Anghunk
方案是在梦繁星的协助下完成的。
介绍 Anghunk 评论携带很多精美的表情，但是正常情况下 Typecho 后台是没办法正常解析这些表情的。如下图；
但是，经过我解析表情之后，就可以变成下面这样，使用主题如果需要这种功能，可以按照我下面的步骤进行改造。
修改 打开 /admin/manage-comments.php 文件，在题头插入：
/* * 解析表情 */ function getparseBiaoQingComment($content) { $emopath=$_SERVER[&#39;REQUEST_SCHEME&#39;].&#34;:&#34;. DIRECTORY_SEPARATOR . DIRECTORY_SEPARATOR . $_SERVER[&#39;HTTP_HOST&#39;]; $emo = false; global $emo; if(!$emo) { $emo = json_decode(file_get_contents(dirname(dirname(dirname(__FILE__))).&#39;/zburu.com/usr/themes/dlzmoe/libs/OwO.json&#39;), true); } foreach ($emo as $v) { if($v[&#39;type&#39;] == &#39;image&#39;) { foreach ($v[&#39;container&#39;] as $vv) { $emoaa=&#34;::&#34;.$v[&#39;name&#39;].&#34;:&#34;.$vv[&#39;icon&#39;].&#34;::&#34;; $content = str_replace($emoaa, &#39; &lt;img style=&#34;max-height:40px;vertical-align:middle;&#34; src=&#34;&#39;.$emopath.&#39;/usr/themes/dlzmoe/libs/emotion/&#39;.$v[&#39;name&#39;].&#39;/&#39;.$vv[&#39;icon&#39;] .&#39;.png&#34; alt=&#34;&#39;.$vv[&#39;text&#39;] .&#39;&#34;&gt; &#39;, $content); } } } return $content; } 注意我放置的位置，必须要要 &lt;?php ... ?&gt; 之间
**找到 第166行，修改一下，把标签中的代码替换为下方标注的。 **
&lt;div class=&#34;comment-content&#34;&gt; &lt;!-- 解析输出带表情的评论 --&gt; &lt;?php $con=$comments-&gt;content; echo getparseBiaoQingComment($con); ?&gt; &lt;/div&gt; 之后回到后台评论列表就可以看到评论成功被解析了，本方法仅适用于 Anghunk 主题。
	</div>
</article>
<article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/blog/152.html/" style="color: #000000; text-decoration: none;" onmouseover="this.style.color='#4d4e4e';" onmouseout="this.style.color='#000000';">出错了，面板运行时发生错误！</a>
		</h2>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<time class="meta__text" datetime="2022-07-18T00:00:00Z">2022-07-18</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		# 删除之前无法使用的面板环境 rm -rf /www/server/panel/pyenv #重新获取新的面板环境和更新包 curl http://download.bt.cn/install/update_panel.sh|bash 
	</div>
</article>
<article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/blog/151.html/" style="color: #000000; text-decoration: none;" onmouseover="this.style.color='#4d4e4e';" onmouseout="this.style.color='#000000';">笔记:vue 中使用 axios 调用数据并渲染</a>
		</h2>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<time class="meta__text" datetime="2022-07-12T00:00:00Z">2022-07-12</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		示例如下。
&lt;template&gt; &lt;div class=&#34;posts&#34;&gt; &lt;div v-for=&#34;item in list&#34; :key=&#34;item.cid&#34; &gt; {{ item.title }} &lt;/div&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; import Axios from &#39;axios&#39;; export default { name: &#39;index&#39;, data () { return { list: [] } }, methods: { getData () { var api = &#39;https://zburu.com/api/posts.php&#39;; Axios.get(api).then((response) =&gt; { this.list = response.data; console.log(response.data) }).catch((error) =&gt; { console.log(error); }) } }, mounted () { this.getData(); }, } &lt;/script&gt; &lt;style&gt; &lt;/style&gt; 
	</div>
</article>
<article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/blog/146.html/" style="color: #000000; text-decoration: none;" onmouseover="this.style.color='#4d4e4e';" onmouseout="this.style.color='#000000';">obsidian:如何使用坚果云进行多端同步？</a>
		</h2>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<time class="meta__text" datetime="2022-06-27T00:00:00Z">2022-06-27</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		接上篇文章 《关于我选择笔记系统这件小事》 ，obsidian 的个人体验很棒，我也打算长久使用作为个人知识库。
但是它有一个弊端，就是本地离线化导致同步是个问题，官方的同步服务很贵，给我劝退了，因此我寻求了其他的同步备份方案，就是今天我要分享的坚果云 + obsidian。
注册账号 在坚果云官网注册一个账号，选择个人用户，创建账号之后登陆。
点击创建 &gt; 个人同步文件夹，以后就同步这个文件夹内的内容了。这个我在里面新建了一个 test 文件夹。
pc 端同步 接下来需要将电脑本地的文件和坚果云的文件夹相连接，只要你在本地修改了文件，自动同步到坚果云。
点击页面左侧的下载客户端。
下载完成之后登陆，你就可以看到里面有一个 test 文件夹，是刚才在网页官网创建的。然后在右边三个点里面选择同步到本地。
浏览你的文件夹，找到一个地方存放 test 文件夹，点击确定，坚果云就会自动同步你在本地文件。但是这个时候 test 文件夹是空的，需要将 obsidian 文件全部移动进去就行了。然后在 obsidian 客户端重新打开 test 库。
在另一台电脑，进行上面同样的操作，将坚果云的同步文件夹映射到本地，就会自动下载云端的文件。之后，不管你在哪台电脑修改 obsidian 笔记，都会同步到拥有坚果云客户端的其他电脑。
这是 pc 端同步的方案，之后我会继续分享如果将 pc 同步到手机端。
	</div>
</article>
<article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/blog/145.html/" style="color: #000000; text-decoration: none;" onmouseover="this.style.color='#4d4e4e';" onmouseout="this.style.color='#000000';">人民币小写转大写</a>
		</h2>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<time class="meta__text" datetime="2022-06-24T00:00:00Z">2022-06-24</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		一个有趣的 demo
this.smalltoBIG(43533534.78); //肆仟叁佰伍拾叁万叁仟伍佰叁拾肆元柒角捌分 smalltoBIG (n) { var fraction = [&#39;角&#39;, &#39;分&#39;]; var digit = [&#39;零&#39;, &#39;壹&#39;, &#39;贰&#39;, &#39;叁&#39;, &#39;肆&#39;, &#39;伍&#39;, &#39;陆&#39;, &#39;柒&#39;, &#39;捌&#39;, &#39;玖&#39;]; var unit = [ [&#39;元&#39;, &#39;万&#39;, &#39;亿&#39;],[&#39;&#39;, &#39;拾&#39;, &#39;佰&#39;, &#39;仟&#39;] ]; var head = n &lt; 0 ? &#39;欠&#39; : &#39;&#39;; n = Math.abs(n); var s = &#39;&#39;; for (var i = 0; i &lt; fraction.length; i++) { s += (digit[Math.floor(n * 10 * Math.pow(10, i)) % 10] + fraction[i]).replace(/零./, &#39;&#39;); } s = s || &#39;整&#39;; n = Math.floor(n); for (var i = 0; i &lt; unit[0].length &amp;&amp; n &gt; 0; i++) { var p = &#39;&#39;; for (var j = 0; j &lt; unit[1].length &amp;&amp; n &gt; 0; j++) { p = digit[n % 10] + unit[1][j] + p; n = Math.floor(n / 10); } s = p.replace(/(零.)*零$/, &#39;&#39;).replace(/^$/, &#39;零&#39;) + unit[0][i] + s; } return head + s.replace(/(零.)*零元/, &#39;元&#39;).replace(/(零.)+/g, &#39;零&#39;).replace(/^整$/, &#39;零元整&#39;); }, 
	</div>
</article>
<article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/blog/143.html/" style="color: #000000; text-decoration: none;" onmouseover="this.style.color='#4d4e4e';" onmouseout="this.style.color='#000000';">掘金抽奖脚本</a>
		</h2>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<time class="meta__text" datetime="2022-06-22T00:00:00Z">2022-06-22</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		分享一个掘金抽奖的油猴脚本，可以一键签到，抽奖，梭哈。
攒多一点矿石，体验买彩票的感觉。
油猴脚本代码 ```js // ==UserScript== // @name 掘金抽奖 // @namespace http://tampermonkey.net/ // @version 1.2.5 // @description 掘金抽奖 签到 免费抽奖 5 连抽 10 连抽 可视化抽奖 petite-vue // @author 无仙 // @match https://juejin.cn/* // @icon https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/favicon-32x32.png // @require https://unpkg.com/petite-vue // ==/UserScript== (async function () { &lsquo;use strict&rsquo;;
const { createApp } = PetiteVue; // 不会吧不会吧，不会还有人不知道 petite-vue 吧
const root = document.createElement(&lsquo;div&rsquo;); root.class = &lsquo;wx_draw_wrap&rsquo;; root.innerHTML = ` &lt;div v-show=&quot;!popup&quot; class=&ldquo;wx_draw&rdquo; @click=&ldquo;open&rdquo;&gt;掘金抽奖
&lt;div v-if=&quot;popup&quot; class=&quot;wx_popup&quot;&gt; &lt;div class=&quot;wx_mask&quot; @click=&quot;popup = false&quot;&gt;&lt;/div&gt; &lt;div class=&quot;wx_main&quot;&gt; &lt;div class=&quot;wx_header&quot;&gt; &lt;div&gt;掘金抽奖&lt;/div&gt; &lt;div class=&quot;wx_score&quot;&gt;当前矿石：{{ score }}&lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;wx_body&quot;&gt; &lt;div class=&quot;wx_options&quot;&gt; &lt;div @click=&quot;check_in&quot; v-if=&quot;check_status === -1 || check_status === false&quot;&gt;签到&lt;/div&gt; &lt;div @click=&quot;get_free&quot; v-else&gt;签到成功&lt;/div&gt; &lt;div @click=&quot;draw(5)&quot;&gt;5 连抽&lt;/div&gt; &lt;div @click=&quot;draw(10)&quot;&gt;10 连抽&lt;/div&gt; &lt;div @click=&quot;draw(undefined)&quot;&gt;梭哈抽奖&lt;/div&gt; &lt;/div&gt; &lt;table cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot;&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;奖品图片&lt;/th&gt; &lt;th&gt;奖品名称&lt;/th&gt; &lt;th&gt;中奖次数&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr v-for=&quot;item in award&quot;&gt; &lt;td&gt;&lt;img :src=&quot;item.lottery_image&quot;/&gt;&lt;/td&gt; &lt;td&gt;{{ item.lottery_name }}&lt;/td&gt; &lt;td&gt;{{ item.times }}&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;div class=&quot;wx_loading&quot; v-if=&quot;loading&quot;&gt; &lt;svg class=&quot;circular&quot; viewBox=&quot;25 25 50 50&quot;&gt; &lt;circle class=&quot;path&quot; cx=&quot;50&quot; cy=&quot;50&quot; r=&quot;20&quot; fill=&quot;none&quot; /&gt; &lt;/svg&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;wx_footer&quot;&gt; &lt;div class=&quot;wx_confirm wx_btn&quot; @click=&quot;popup = false&quot;&gt;关闭&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; `;
// 查询奖品列表 const res = await fetch(&lsquo;https://api.juejin.cn/growth_api/v1/lottery_config/get', { headers: { cookie: document.cookie }, method: &lsquo;GET&rsquo;, credentials: &lsquo;include&rsquo; }).then((res) =&gt; res.json());
const award = (res.data &amp;&amp; res.data.lottery ? res.data.lottery : []).map((item) =&gt; ({ &hellip;item, times: 0 })); const { free_count, point_cost } = res.data; // 剩余免费抽奖次数，单次抽奖消耗数
document.body.appendChild(root); // 插入 DOM
// petite-vue init 初始化 createApp({ award, popup: false, loading: false, score: 0, free_count, check_status: -1,
async open() { const res = await fetch('https://api.juejin.cn/growth_api/v1/get_cur_point', { headers: { cookie: document.cookie }, method: 'GET', credentials: 'include' }).then((res) =&gt; res.json()); this.score = res.data; // 当前分数 this.popup = true; (this.check_status === -1 || this.check_status === false) &amp;&amp; this.get_status(); }, async draw(times, is_not_free = true) { if (this.loading || times === 0) return; // const is_not_free = !(this.free_count &amp;&amp; times === 1); if (is_not_free &amp;&amp; this.score &lt; point_cost * (times || 1)) return alert('分都不够想啥呢？'); let i = 0; const drawFn = async () =&gt; { if ((is_not_free &amp;&amp; this.score &lt; point_cost) || i === times) { this.free_count = 0; this.loading = false; this.open(); console.log(`${times ? times + '连抽' : '梭哈'}结束！`); return; } const result = await fetch('https://api.juejin.cn/growth_api/v1/lottery/draw', { headers: { cookie: document.cookie }, method: 'POST', credentials: 'include' }).then((res) =&gt; res.json()); if (result.err_no !== 0) { console.log(result.err_msg); this.loading = false; this.open(); return; } i++; is_not_free &amp;&amp; (this.score -= point_cost); if (result.data.lottery_type === 1) this.score += 66; const item = this.award.find((item) =&gt; item.lottery_id === result.data.lottery_id); item.times++; console.log(`抽到：${result.data.lottery_name}`); drawFn(); }; console.log(`开始${times ? times + '连抽' : '梭哈'}！`); this.loading = true; this.award.forEach((item) =&gt; { item.times = 0; }); try { drawFn(); } catch (error) { this.loading = false; console.error(error); } }, async check_in() { if (this.check_status) { this.get_free(); // 免费抽奖 return; } // 签到 const check_in = await fetch('https://api.juejin.cn/growth_api/v1/check_in', { headers: { cookie: document.cookie }, method: 'POST', credentials: 'include' }).then((res) =&gt; res.json()); if (check_in.err_no !== 0) { alert('签到失败！'); this.check_status = false; return; } this.check_status = true; this.score = check_in.data.sum_point; this.get_free(); // 免费抽奖 }, async get_status() { // 查询签到状态 const today_status = await fetch('https://api.juejin.cn/growth_api/v1/get_today_status', { headers: { cookie: document.cookie }, method: 'GET', credentials: 'include' }).then((res) =&gt; res.json()); this.check_status = today_status.data; }, async get_free() { // 查询是否有免费抽奖次数 const res = await fetch('https://api.juejin.cn/growth_api/v1/lottery_config/get', { headers: { cookie: document.cookie }, method: 'GET', credentials: 'include' }).then((res) =&gt; res.json()); this.free_count = res.data.free_count; if (res.data.free_count) { // 有免费抽奖次数 this.draw(res.data.free_count, false); } } }).mount();
// 处理样式 const style = .wx_draw_wrap { box-sizing: border-box; position: fixed; top: 50%; left: 0px; z-index: 888888; margin-top: -20px; } .wx_draw { box-sizing: border-box; position: fixed; top: 50%; left: 0px; z-index: 888888; width: 40px; height: 40px; line-height: 16px; font-size: 12px; padding: 4px; background-color: rgb(232, 243, 255); border: 1px solid rgb(232, 243, 255); color: rgb(30, 128, 255); text-align: center; overflow: hidden; cursor: pointer; } .wx_popup { position: fixed; left: 0; top: 0; right: 0; bottom: 0; z-index: 999999; } .wx_mask { width: 100%; height: 100%; background: rgba(0,0,0,0.5); } .wx_main { --width: 460px; position: absolute; left: 50%; top: 50%; width: var(--width); transform: translate(-50%, -50%); background: #fff; border-radius: 4px; } .wx_main .wx_header { height: 40px; line-height: 40px; font-size: 16px; padding: 0 16px; border-bottom: 1px solid #999; display: flex; align-items: center; justify-content: space-between; color: #000; font-weight: 400; } .wx_score { font-size: 12px; font-size: #00a100; } .wx_main .wx_body { padding: 16px; border-bottom: 1px solid #999; position: relative; } .wx_main .wx_options { display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; } .wx_main .wx_options div { width: 80px; text-align: center; height: 24px; line-height: 24px; background-color: rgb(232, 243, 255); border: 1px solid #c9d4e3; color: rgb(30, 128, 255); cursor: pointer; border-radius: 2px; } .wx_main .wx_body p { margin: 0 0 8px; } .wx_body table { width: 100%; text-align: center; border-left: 1px solid #ccc; border-top: 1px solid #ccc; } .wx_body table th, .wx_body table td { border-right: 1px solid #ccc; border-bottom: 1px solid #ccc; line-height: 20px; } .wx_body table th { line-height: 28px; } .wx_main .wx_body img { vertical-align: middle; width: 40px; height: 40px; } .wx_main .wx_footer { padding: 12px 16px; text-align: right; } .wx_btn { display: inline-block; width: 48px; cursor: pointer; text-align: center; height: 20px; line-height: 20px; background-color: rgb(232, 243, 255); border: 1px solid #c9d4e3; color: rgb(30, 128, 255); border-radius: 2px; } .wx_loading { position: absolute; left: 0; top: 0; right: 0; bottom: 0; z-index: 9999999; background: rgba(0,0,0,0.65); } .wx_loading .circular { height: 42px; width: 42px; -webkit-animation: loading-rotate 2s linear infinite; animation: loading-rotate 2s linear infinite; position: absolute; left: 50%; top: 50%; margin-top: -21px; margin-left: -21px; } .wx_loading .path { -webkit-animation: loading-dash 1.5s ease-in-out infinite; animation: loading-dash 1.5s ease-in-out infinite; stroke-dasharray: 90, 150; stroke-dashoffset: 0; stroke-width: 2; stroke: #409eff; stroke-linecap: round; } @keyframes loading-rotate { 100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); } } @keyframes loading-dash { 0% { stroke-dasharray: 1, 200; stroke-dashoffset: 0; } 50% { stroke-dasharray: 90, 150; stroke-dashoffset: -40px; } 100% { stroke-dasharray: 90, 150; stroke-dashoffset: -120px; } };
const styleEl = document.createElement(&lsquo;style&rsquo;); styleEl.textContent = style; document.head.appendChild(styleEl); })();
&lt;/details&gt; &lt;/summary&gt; 
	</div>
</article>
<article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/blog/132.html/" style="color: #000000; text-decoration: none;" onmouseover="this.style.color='#4d4e4e';" onmouseout="this.style.color='#000000';">typecho 评论回复艾特评论人</a>
		</h2>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<time class="meta__text" datetime="2022-06-07T00:00:00Z">2022-06-07</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		typecho 在评论时默认是没有 @ 评论人的功能，可以用代码加一下。
在 functions.php 中：
/* * 评论回复时 @ 评论人 */ function get_comment_at($coid) { $db = Typecho_Db::get(); $prow = $db-&gt;fetchRow($db-&gt;select(&#39;parent,status&#39;)-&gt;from(&#39;table.comments&#39;) -&gt;where(&#39;coid = ?&#39;, $coid)); $mail = &#34;&#34;; $parent = @$prow[&#39;parent&#39;]; if ($parent != &#34;0&#34;) { $arow = $db-&gt;fetchRow($db-&gt;select(&#39;author,status,mail&#39;)-&gt;from(&#39;table.comments&#39;) -&gt;where(&#39;coid = ?&#39;, $parent)); @$author = @$arow[&#39;author&#39;]; $mail = @$arow[&#39;mail&#39;]; if(@$author &amp;&amp; $arow[&#39;status&#39;] == &#34;approved&#34;){ if (@$prow[&#39;status&#39;] == &#34;waiting&#34;){ echo &#39;&lt;p class=&#34;commentReview&#34;&gt;（评论审核中）)&lt;/p&gt;&#39;; } echo &#39;&lt;a href=&#34;#comment-&#39; . $parent . &#39;&#34;&gt;@&#39; . $author . &#39;&lt;/a&gt;&#39;; }else{ if (@$prow[&#39;status&#39;] == &#34;waiting&#34;){ echo &#39;&lt;p class=&#34;commentReview&#34;&gt;（评论审核中）)&lt;/p&gt;&#39;; }else{ echo &#39;&#39;; } } } else { if (@$prow[&#39;status&#39;] == &#34;waiting&#34;){ echo &#39;&lt;p class=&#34;commentReview&#34;&gt;（评论审核中）)&lt;/p&gt;&#39;; }else{ echo &#39;&#39;; } } } 然后在 comments.php 中输出评论内容代码的前面加上：
&lt;?php $parentMail = get_comment_at($comments-&gt;coid)?&gt;&lt;?php echo $parentMail;?&gt; ▼代码所示 ▼效果图 我的博客即将同步至腾讯云+社区，邀请大家一同入驻：https://cloud.tencent.com/developer/support-plan?invite_code=17ctk6evsjk5b
	</div>
</article>
<article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/blog/130.html/" style="color: #000000; text-decoration: none;" onmouseover="this.style.color='#4d4e4e';" onmouseout="this.style.color='#000000';">宝塔自动备份网站到邮箱教程</a>
		</h2>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<time class="meta__text" datetime="2022-05-25T00:00:00Z">2022-05-25</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		前言 网站经常备份好处就是遇到问题以后可以迅速的恢复，不那么被动，防止信息丢失，操作性很大。虽然搭建一个网站非常容易，但为了应对网络上各种各样的意外情况，避免自己的网站付诸东流，做好网站备份是非常有必要的。
现在邮箱接收都支持附件文件，将网站文件和数据库文件备份到我们自己的邮箱也是一种很好地备份方式，也防止备份文件丢失。
邮箱接收附件文件大小，取决于使用的邮箱服务。一般来说个人博客网站源文件，数据库文件不大，常见邮箱服务都是可以使用的。
下面开始教程，宝塔安装教程可去宝塔官网查看安装教程。
系统环境：CentOS 7.9.2009 x86_64（其他系统可参考方式，命令安装自行解决）
宝塔面板：7.9.0
安装 mailx 浏览器登录进入宝塔面板，左侧-》终端。首次使用宝塔终端，需要登录服务器，填写 root 用户密码后登录。
在终端中输入以下 mailx 安装命令，回车安装。
yum install -y mailx 编辑配置文件 安装完成后，编辑邮箱服务的相关配置文件。 在终端输入以下命令，然后回车进入编辑文件界面。
vim /etc/mail.rc 使用键盘上下键，找到大约 69 行位置，按‘i’键输入，添加以下配置。
set from=发件人@qq.com #发送邮件后显示的邮件发送方 需要修改 set smtp=smtps://smtp.qq.com:465 #SMTP服务器的网址及端口 需要修改 set smtp-auth-user=发件人@qq.com #发送邮箱 需要修改 set smtp-auth-password=邮箱密码/SMTP授权码 #设置的邮箱密码，SMTP授权密码 需要修改 set smtp-auth=login #动作、登录 无需修改 set ssl-verify=ignore #ssl验证忽略 无需修改 set nss-config-dir=/etc/pki/nssdb #证书存放目录 无需修改 请将配置按要求修改为自己所使用的邮箱服务配置。服务器需要开启 465 端口。
配置修改完成后，按 Esc 键，输入:wq回车保存退出编辑界面。
测试发送邮件 在终端输入发送测试邮件命令，需要修改收件人邮箱，回车执行。
echo &#34;这是一封测试邮件&#34; | mail -s &#34;邮件主题&#34; 收件人@qq.com 查看邮箱是否收到测试邮件。
如果发现终端报以下错误（但没有影响收件），没有错误请跳过。
Error in certificate: Peer's certificate issuer has been marked as not trusted by the.
Ctrl+C结束命令后，修改邮箱服务配置文件，将set ssl-verify=ignore修改为set ssl-verify=strict后保存退出（编辑方法同上）。
修改完成后在终端输入以下命令。
获取邮件服务器证书
echo -n &#34; &#34; | openssl s_client -connect smtp.qq.com:465 | sed -ne &#39;/-BEGIN CERTIFICATE-/,/-END CERTIFIICATE-/p&#39; &gt; /etc/pki/nssdb/qq.crt 把证书添加到受信任表
certutil -A -n &#39;yeah&#39; -t &#34;P,P,P&#34; -d /etc/pki/nssdb -i /etc/pki/nssdb/qq.crt 注：如果是 163 或者其他邮箱服务器请将smtp.qq.com改为smtp.163.com，qq.crt改为163.crt 以此类推。
命令执行完成后，重新执行发送测试邮件命令，不在报错。
宝塔定时任务 左侧-》计划任务
首先按自己需求（计划任务执行时间，保留文件数量等）添加网站和数据库源文件备份任务。
然后添加shell脚本任务，在脚本内容中添加以下脚本命令，修改收件人为自己的邮箱。
#!/bin/bash cd /www/backup/site for file in $(ls *) do str=&#34;${str} -a ${file}&#34; done echo &#34;主人，今天的网站备份又到了哦，请注意查收！&#34; | mail -s &#34;网站备份&#34; $str 2502393029@qq.com 执行时间可按需求，晚于网站，数据库备份任务执行时间。
数据库备份和网站备份一样需要再添加一次计划任务，将cd /www/backup/site 修改为cd /www/backup/database数据库备份文件所在目录即可，参考改一下邮件主题，和内容信息。
计划任务添加完成后，可先执行网站，数据库源文件备份任务，再执行网站，数据库邮箱shell脚本备份任务，然后前往邮箱查看文件是否收到，文件过大，邮件会有延迟。
注：如果有报错或收不到邮件情况，请仔细检查命令，配置文件是否有误，或者查看脚本执行日志进行排查。
转载自梦繁星博客：https://blog.emoao.com/13.html
如果问题请在评论区留言。
	</div>
</article>

</main>

<div class="pagination">
	<a class="pagination__item pagination__item--prev btn" href="/categories/%E6%8A%80%E6%9C%AF/page/3/">«</a>
	<span class="pagination__item pagination__item--current">4/12</span>
	<a class="pagination__item pagination__item--next btn" href="/categories/%E6%8A%80%E6%9C%AF/page/5/">»</a>
</div>

			</div>
			

		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 子舒的博客, 
			使用 hugo 构建
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>

  <script>
    MathJax = {
      tex: {
        inlineMath: [["$", "$"]],
      },
      displayMath: [
        ["$$", "$$"],
        ["\[\[", "\]\]"],
      ],
      svg: {
        fontCache: "global",
      },
    };
  </script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script
    id="MathJax-script"
    async
    src="https://gcore.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
  ></script>
</body>
</html>